{"version":3,"file":"static/webpack/static/development/pages/admin/crud/category-tag.js.dc87590c7fc230f2731b.hot-update.js","sources":["webpack:///./actions/category.js","webpack:///./components/crud/category.js"],"sourcesContent":["import fetch from 'isomorphic-fetch';\nimport {API} from '../config';\nimport cookie from 'js-cookie';\n\nexport const create=(category,token)=>{\n   \n    return fetch(`${API}/category`,{\n        method:'POST',\n        headers:{\n            Accept:'application/json',\n            'Content-type':'application/json',\n            Authorization :`Bearer ${token}`\n        },\n        body:JSON.stringify(category)\n\n    })\n    .then(response=>response.json())\n    .catch(err=>console.log(err))\n};\n\n\nexport const getCategories = () => {\n    return fetch(`${API}/categories`, {\n        method: 'GET'\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const singleCategory = slug => {\n    return fetch(`${API}/category/${slug}`, {\n        method: 'GET'\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const removeCategory = (slug, token) => {\n    return fetch(`${API}/category/${slug}`, {\n        method: 'DELETE',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`\n        }\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};","import { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { getCookie } from '../../actions/auth';\nimport { create, getCategories, removeCategory } from '../../actions/category';\n \nconst Category = () => {\n    const [values, setValues] = useState({\n        name: '',\n        error: false,\n        success: false,\n        categories: [],\n        removed: false,\n        reload: false\n    });\n \n    const { name, error, success, categories, removed, reload } = values;\n    const token = getCookie('token');\n \n    useEffect(() => {\n        loadCategories();\n    }, [reload]);\n \n    const loadCategories = () => {\n        getCategories().then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setValues({ ...values, categories: data });\n            }\n        });\n    };\n \n    const showCategories = () => {\n        return categories.map((c, i) => {\n            return (\n                <button\n                    onDoubleClick={() => deleteConfirm(c.slug)}\n                    title=\"Double click to delete\"\n                    key={i}\n                    className=\"btn btn-outline-primary mr-1 ml-1 mt-3\"\n                >\n                    {c.name}\n                </button>\n            );\n        });\n    };\n \n    const deleteConfirm = slug => {\n        let answer = window.confirm('Are you sure you want to delete this category?');\n        if (answer) {\n            deleteCategory(slug);\n        }\n    };\n \n    const deleteCategory = slug => {\n        // console.log('delete', slug);\n        removeCategory(slug, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setValues({ ...values, error: false, success: false, name: '', removed: !removed, reload: !reload });\n            }\n        });\n    };\n \n    const clickSubmit = e => {\n        e.preventDefault();\n        // console.log('create category', name);\n        create({ name }, token).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error, success: false });\n            } else {\n                setValues({ ...values, error: false, success: false, name: '', removed: !removed, reload: !reload });\n            }\n        });\n    };\n \n    const handleChange = e => {\n        setValues({ ...values, name: e.target.value, error: false, success: false, removed: '' });\n    };\n \n    const showSuccess = () => {\n        if (success) {\n            return <p className=\"text-success\">Category is created</p>;\n        }\n    };\n \n    const showError = () => {\n        if (error) {\n            return <p className=\"text-danger\">Category already exist</p>;\n        }\n    };\n \n    const showRemoved = () => {\n        if (removed) {\n            return <p className=\"text-danger\">Category is removed</p>;\n        }\n    };\n \n    const mouseMoveHandler = e => {\n        setValues({ ...values, error: false, success: false, removed: '' });\n    };\n \n    const newCategoryFom = () => (\n        <form onSubmit={clickSubmit}>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name</label>\n                <input type=\"text\" className=\"form-control\" onChange={handleChange} value={name} required />\n            </div>\n            <div>\n                <button type=\"submit\" className=\"btn btn-primary\">\n                    Create\n                </button>\n            </div>\n        </form>\n    );\n \n    return (\n        <React.Fragment>\n            {showSuccess()}\n            {showError()}\n            {showRemoved()}\n            <div onMouseMove={mouseMoveHandler}>\n                {newCategoryFom()}\n                {showCategories()}\n            </div>\n        </React.Fragment>\n    );\n};\n \nexport default Category;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAPA;AAUA;AAAA;AACA;AAAA;AACA;AAGA;AACA;AACA;AADA;AAIA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AADA;AAIA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AASA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AACA;AAaA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;A","sourceRoot":""}
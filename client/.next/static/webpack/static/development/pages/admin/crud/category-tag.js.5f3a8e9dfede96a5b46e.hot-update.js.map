{"version":3,"file":"static/webpack/static/development/pages/admin/crud/category-tag.js.5f3a8e9dfede96a5b46e.hot-update.js","sources":["webpack:///./actions/tag.js","webpack:///./components/crud/tag.js","webpack:///./pages/admin/crud/category-tag.js"],"sourcesContent":["import fetch from 'isomorphic-fetch';\nimport {API} from '../config';\nimport cookie from 'js-cookie';\nexport const create=(tag,token)=>{\n\n   \n    return fetch(`${API}/api/admin/tag`,{\n        method:'POST',\n        headers:{\n            Accept:'application/json',\n            'Content-type':'application/json',\n            Authorization :`Bearer ${token}`\n        },\n        body:JSON.stringify(tag)\n\n    })\n    .then(response=>response.json())\n    .catch(err=>console.log(err))\n};\n\n\nexport const getTags = () => {\n    return fetch(`${API}/api/admin/tags`, {\n        method: 'GET'\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const singleTag = slug => {\n    return fetch(`${API}/api/admin/tag/${slug}`, {\n        method: 'GET'\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const removeTag = (slug, token) => {\n    return fetch(`${API}/api/admin/rm/${slug}`, {\n        method: 'DELETE',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`\n        }\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};","import { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { getCookie } from '../../actions/auth';\nimport { create, getTags, removeTag } from '../../actions/tag';\n \nconst Tag = () => {\n    const [values, setValues] = useState({\n        name: '',\n        error: false,\n        success: false,\n        tags: [],\n        removed: false,\n        reload: false\n    });\n \n    const { name, error, success, tags, removed, reload } = values;\n    const token = getCookie('token');\n \n    useEffect(() => {\n        loadTags();\n    }, [reload]);\n \n    const loadTags = () => {\n        getTags().then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setValues({ ...values, tags: data });\n            }\n        });\n    };\n \n    const showTags = () => {\n        return tags.map((t, i) => {\n            return (\n                <button\n                    onDoubleClick={() => deleteConfirm(t.slug)}\n                    title=\"Double click to delete\"\n                    key={i}\n                    className=\"btn btn-outline-primary mr-1 ml-1 mt-3\"\n                >\n                    {t.name}\n                </button>\n            );\n        });\n    };\n \n    const deleteConfirm = slug => {\n        let answer = window.confirm('Are you sure you want to delete this tag?');\n        if (answer) {\n            deleteTag(slug);\n        }\n    };\n \n    const deleteTag = slug => {\n        // console.log('delete', slug);\n        removeTag(slug, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setValues({ ...values, error: false, success: false, name: '', removed: !removed, reload: !reload });\n            }\n        });\n    };\n \n    const clickSubmit = e => {\n        e.preventDefault();\n        // console.log('create category', name);\n        create({ name }, token).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error, success: false });\n            } else {\n                setValues({ ...values, error: false, success: false, name: '', removed: !removed, reload: !reload });\n            }\n        });\n    };\n \n    const handleChange = e => {\n        setValues({ ...values, name: e.target.value, error: false, success: false, removed: '' });\n    };\n \n    const showSuccess = () => {\n        if (success) {\n            return <p className=\"text-success\">Tag is created</p>;\n        }\n    };\n \n    const showError = () => {\n        if (error) {\n            return <p className=\"text-danger\">Tag already exist</p>;\n        }\n    };\n \n    const showRemoved = () => {\n        if (removed) {\n            return <p className=\"text-danger\">Tag is removed</p>;\n        }\n    };\n \n    const mouseMoveHandler = e => {\n        setValues({ ...values, error: false, success: false, removed: '' });\n    };\n \n    const newTagFom = () => (\n        <form onSubmit={clickSubmit}>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name</label>\n                <input type=\"text\" className=\"form-control\" onChange={handleChange} value={name} required />\n            </div>\n            <div>\n                <button type=\"submit\" className=\"btn btn-primary\">\n                    Create\n                </button>\n            </div>\n        </form>\n    );\n \n    return (\n        <React.Fragment>\n            {showSuccess()}\n            {showError()}\n            {showRemoved()}\n            <div onMouseMove={mouseMoveHandler}>\n      \n          {newTagFom()}\n\n                {showTags()}\n\n            </div>\n\n        </React.Fragment>\n\n    );\n\n};\n\n\n\nexport default Tag;","import Layout from '../../../components/layout';\nimport Link from 'next/link';\nimport {isAuth} from '../../../actions/auth'\nimport Admin from '../../../components/auth/admin'\nimport Category from '../../../components/crud/category'\nimport Tag from '../../../components/crud/tag'\nimport {useEffect} from 'react';\nconst CategoryTag = () => {\n    return (\n        <Layout>\n\n          {/* <Admin>  */}\n          <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-md-12 pt-5 pb-5\"> <h2>Manage Categories and Tags</h2></div>\n                    <div className=\"col-md-4\">\n                    <ul className=\"list-group\">\n \n<Category />\n</ul>\n                    </div>\n                    <div className=\"col-md-8\">\n\n                    <ul className=\"list-group\">\n \n <Tag />\n </ul>\n                    </div>\n                </div>\n                          \n                </div>\n          \n                {/* </Admin> */}\n        </Layout>\n    );\n};\n\nexport default CategoryTag;\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAPA;AAUA;AAAA;AACA;AAAA;AACA;AAGA;AACA;AACA;AADA;AAIA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AADA;AAIA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AASA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AACA;AAaA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;;;;A","sourceRoot":""}
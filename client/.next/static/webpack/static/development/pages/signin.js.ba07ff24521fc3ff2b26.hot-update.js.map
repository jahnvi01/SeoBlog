{"version":3,"file":"static/webpack/static/development/pages/signin.js.ba07ff24521fc3ff2b26.hot-update.js","sources":["webpack:///./actions/auth.js"],"sourcesContent":["import fetch from 'isomorphic-fetch';\nimport {API} from '../config';\nimport cookie from 'js-cookie';\nimport { get } from 'mongoose';\nexport const signup=(user)=>{\n   \n    return fetch(`${API}/api/auth/signup`,{\n        method:'POST',\n        headers:{\n            Accept:'application/json',\n            'Content-type':'application/json'\n        },\n        body:JSON.stringify(user)\n\n    })\n    .then(response=>response.json())\n    .catch(err=>console.log(err))\n};\nexport const updateUser = (user, next) => {\n    if (process.browser) {\n        if (localStorage.getItem('user')) {\n            let auth = JSON.parse(localStorage.getItem('user'));\n            auth = user;\n            localStorage.setItem('user', JSON.stringify(auth));\n            next();\n        }\n    }\n};\nexport const handleResponse = response => {\n    if (response.status === 401) {\n        signout(() => {\n            Router.push({\n                pathname: '/signin',\n                query: {\n                    message: 'Your session is expired. Please signin'\n                }\n            });\n        });\n    }\n};\nexport const signin=(user)=>{\n   \n    return fetch(`${API}/api/auth/signin`,{\n        method:'POST',\n        headers:{\n            Accept:'application/json',\n            'Content-type':'application/json'\n        },\n        body:JSON.stringify(user)\n\n    })\n \n    .then(response=>response.json())\n    .catch(err=>console.log(err))\n};\n\nexport const setCookie=(key,value)=>{\n    if(process.browser){\n\n        cookie.set(key,value,{expires:1})\n    }\n};\n\nexport const removeCookie=(key)=>{\n    if(process.browser){\n\n        cookie.remove(key,{expires:1})\n    }\n};\nexport const getCookie=(key)=>{\n    if(process.browser){\n\n     return   cookie.get(key)\n    }\n};\n\nexport const setLocalStorage=(key,value)=>{\n    if(process.browser){\n        localStorage.setItem(key,JSON.stringify(value))\n    }\n};\n\n\nexport const removeLocalStorage=(key)=>{\n    if(process.browser){\n        localStorage.removeItem(key)\n    }\n};\n\nexport const authentication=(data,next)=>{\n   console.log(data.user) \n   setCookie('token',data.token);\n   setLocalStorage('user',data.user);\n   next();\n};\n\nexport const signout=(next)=>{\nremoveCookie('token');\nremoveLocalStorage('user');\nnext()\nreturn fetch(`${API}/api/auth/signout`,{\n    method:\"GET\",\n\n})\n.then(res=>{console.log(\"signout success\")})\n.catch(err=>console.log(err))\n}\n\nexport const isAuth=(key)=>{\n    if(process.browser){\n      const cookieChecked=getCookie('token');\n      if(cookieChecked){\n          if(localStorage.getItem('user')){\n              return JSON.parse(localStorage.getItem('user'))\n          }\n          else{\n              return false;\n          }\n      }\n    }\n}\n\n\nexport const forgotPassword = email => {\n    return fetch(`${API}/api/auth/forgot-password`, {\n        method: 'PUT',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(email)\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const resetPassword = resetInfo => {\n    return fetch(`${API}/api/auth/reset-password`, {\n        method: 'PUT',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(resetInfo)\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AAUA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AACA;AAAA;AACA;;;;A","sourceRoot":""}